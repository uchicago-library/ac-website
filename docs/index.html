<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2023-08-24 Thu 16:09 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Docs | Attachment Converter</title>
<meta name="author" content="Matt Teichman" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/js/readtheorg.js"></script>
<link rel="stylesheet" type="text/css" href="../css/og_rto.css" />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400&family=Inter:wght@400;600&family=Poppins:wght@600&display=swap" rel="stylesheet">
<link rel="icon" type="image/x-icon" href="../images/favicon.ico">
</head>
<body>
<div id="content" class="content">
<h1 class="title">Docs | Attachment Converter</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org38fd147">1. Installation </a>
<ul>
<li><a href="#orge747a08">1.1. Automated Installation</a></li>
<li><a href="#orgb455073">1.2. Manual Building</a>
<ul>
<li><a href="#org053b5a1">1.2.1. Install <code>opam</code></a></li>
<li><a href="#org1df3ea6">1.2.2. Install Mercurial</a></li>
<li><a href="#org5a1fae4">1.2.3. Install <code>opam</code> dependencies</a></li>
<li><a href="#org2dd549d">1.2.4. Install OS-level dependencies</a></li>
<li><a href="#org121cade">1.2.5. Copy shell scripts to standard location</a></li>
<li><a href="#org83c45b9">1.2.6. Time to Build</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orge94df2d">2. Advanced Concepts</a>
<ul>
<li><a href="#org4202297">2.1. Conversion Customization</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="orgb6bf81b" class="figure">
<p><a href="../index.html" class="attc-logo"><img src="../images/attc_logo.svg" alt="attc_logo.svg" class="attc-logo" /></a>
</p>
</div>

<p class="tab-navs">
<a href="../guide/" class="tab-navs">Guide</a> <a href="../docs/">Docs</a> <a href="../api/">API</a> <a href="https://github.com/uchicago-library/attachment-converter"><img src="../images/github.svg" alt="github.svg" class="org-svg" /></a> <a href="./index.html#table-of-contents"><img src="../images/navbar.svg" alt="navbar.svg" class="org-svg" /></a>
</p>

<div id="outline-container-org38fd147" class="outline-2">
<h2 id="org38fd147"><span class="section-number-2">1.</span> Installation <a id="orgb621242"></a></h2>
<div class="outline-text-2" id="text-1">
<p>
Once this software is ready for official release, we will be providing
multiple installation options across as many hardware and OS platforms
as we can.  Currently, however, the only way to install the project is
to build it from source, which you probably only realistically want to
attempt if you're either a developer or a system administrator.  These
instructions are currently undergoing heavy revision, so if you try
them out and experience any difficulties, please don't hesitate to
contact us.  User feedback at this stage is incredibly valuable.
</p>

<p>
For ordinary users, we intend to make Attachment Converter available
to install via one of the standard package managers and also directly
as a binary upon its first release.  Please check back later this year
for updates!
</p>

<p>
As we work toward our first release, here are instructions for
building Attachment Converter from source and then installing it.
</p>

<p>
We have two available installation methods: an automated process
using a <code>GNUmakefile</code> and a manual process. Either method will
require you to download the source code.
</p>

<p>
You can get the latest source straight from our <a href="https://github.com/uchicago-library/attachment-converter">GitHub repository</a>:
</p>

<pre class="example" id="org17ee06f">
$ cd /path/to/your/source/code
$ git clone https://github.com/uchicago-library/attachment-converter.git
</pre>
</div>

<div id="outline-container-orge747a08" class="outline-3">
<h3 id="orge747a08"><span class="section-number-3">1.1.</span> Automated Installation</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Once you have finished downloading the source code, run:
</p>

<pre class="example" id="org281eb86">
$ make home-install
</pre>

<p>
At the end of the installation process, you will see a notice saying:
</p>

<pre class="example" id="org92ee2c9">
Attachment Converter has been installed to ~/bin/attc.
Please ensure that ~/bin is on your path.
</pre>

<p>
You can ensure that the installation worked as intended by the following command.
</p>

<p>
MacOS:
</p>

<pre class="example" id="orgda45ab3">
$ echo "export PATH=~/bin:$PATH" &gt;&gt; ~/.zshrc
</pre>

<p>
WSL Debian &amp; Arch Linux:
</p>

<pre class="example" id="org28957cc">
$ echo "export PATH=~/bin:$PATH" &gt;&gt; ~/.bashrc
</pre>
</div>
</div>

<div id="outline-container-orgb455073" class="outline-3">
<h3 id="orgb455073"><span class="section-number-3">1.2.</span> Manual Building</h3>
<div class="outline-text-3" id="text-1-2">
</div>
<div id="outline-container-org053b5a1" class="outline-4">
<h4 id="org053b5a1"><span class="section-number-4">1.2.1.</span> Install <code>opam</code></h4>
<div class="outline-text-4" id="text-1-2-1">
<p>
Attachment Converter is written in <a href="https://ocaml.org/">OCaml</a>, which means that in order to
build it, you need to install the <code>opam</code> package manager, which we
recommend doing via your operating system's package manager.  For
example:
</p>

<p>
Arch Linux:
</p>

<pre class="example" id="org72432f3">
$ pacman -S opam
</pre>

<p>
macOS:
</p>

<pre class="example" id="orgf2d69ce">
$ brew install opam
</pre>

<p>
WSL Debian:
</p>

<pre class="example" id="org4f4094e">
$ apt install opam
</pre>

<p>
Then, regardless of how you install <code>opam</code>, you need to initialize it
in order to be able to use it.
</p>

<pre class="example" id="orgff703fe">
$ opam init
$ eval $(opam env)
</pre>

<p>
<code>opam</code> should then print some information to the console telling you
about the steps it's taking to initialize.
</p>

<p>
That should be enough to get you going, but if you'd like more
detailed information on how to install <code>opam</code>, please see <a href="http://opam.ocaml.org/doc/Install.html#Using-your-distribution-39-s-package-system">the official
installation instructions</a>.
</p>
</div>
</div>

<div id="outline-container-org1df3ea6" class="outline-4">
<h4 id="org1df3ea6"><span class="section-number-4">1.2.2.</span> Install Mercurial</h4>
<div class="outline-text-4" id="text-1-2-2">
<p>
Attachment Converter relies on the Mercurial version control system to
install some of its third-party library dependencies.  For example:
</p>

<p>
Arch Linux:
</p>

<pre class="example" id="orgb5d7763">
$ pacman -S mercurial
</pre>

<p>
macOS:
</p>

<pre class="example" id="org005543e">
$ brew install mercurial
</pre>

<p>
WSL Debian:
</p>

<pre class="example" id="org0a01e70">
$ apt install mercurial
</pre>
</div>
</div>

<div id="outline-container-org5a1fae4" class="outline-4">
<h4 id="org5a1fae4"><span class="section-number-4">1.2.3.</span> Install <code>opam</code> dependencies</h4>
<div class="outline-text-4" id="text-1-2-3">
<p>
To install all third-party library dependencies for Attachment
Converter to your <code>~/.opam</code> directory (which is where <code>opam</code> put the
OCaml compiler and other packages it's going to use when you ran <code>opam
init</code>), please run the following <code>make</code> rule from the root directory
of the GitHub project you cloned:
</p>

<pre class="example" id="orgce14e99">
$ cd /path/to/your/source/code/attachment-converter
$ make deps
</pre>

<p>
This will make the Digital Library Development Center's very own
<code>opam</code> repository available to you, then install all of Attachment
Converter's third-party library dependencies.  <code>make deps</code> should
suffice for most purposes, but if you'd like to pursue the slightly
fancier option of creating a sandboxed <code>opam</code> switch, you can instead
run:
</p>

<pre class="example" id="org693dd31">
$ cd /path/to/your/source/code/attachment-converter
$ make sandbox
</pre>

<p>
If you don't know what a sandboxed <code>opam</code> switch is, we suggest not
worrying about it and going with the <code>make deps</code> rule.
</p>
</div>
</div>

<div id="outline-container-org2dd549d" class="outline-4">
<h4 id="org2dd549d"><span class="section-number-4">1.2.4.</span> Install OS-level dependencies</h4>
<div class="outline-text-4" id="text-1-2-4">
<p>
Next, you must install Attachment Converter's OS-level dependencies.
For example:
</p>

<p>
Arch Linux:
</p>
<pre class="example" id="org73366e3">
$ pacman -S libreoffice pandoc libvips ghostscript
</pre>

<p>
macOS:
</p>
<pre class="example" id="org3821ce7">
$ brew install libreoffice pandoc vips ghostscript verapdf
</pre>

<p>
WSL Debian:
</p>
<pre class="example" id="org539ed07">
$ apt install libreoffice pandoc vips ghostscript verapdf
</pre>

<p>
Finally, Attachment Converter has one OS-level dependency that is not
available through the standard repositories, called <a href="https://github.com/matteosecli/pdf2archive"><code>pdf2archive</code></a>.
This is a utility for converting PDF to PDF-A-1b.
</p>

<p>
Download <code>pdf2archive</code>:
</p>

<pre class="example" id="org78ac9c0">
$ cd /path/to/your/source/code
$ git clone git@github.com:matteosecli/pdf2archive.git
$ cd pdf2archive
$ chmod +x ./pdf2archive
$ export PATH=$PATH:/path/to/your/source/code/pdf2archive
</pre>
</div>
</div>

<div id="outline-container-org121cade" class="outline-4">
<h4 id="org121cade"><span class="section-number-4">1.2.5.</span> Copy shell scripts to standard location</h4>
<div class="outline-text-4" id="text-1-2-5">
<p>
In our current pre-alpha stage, the shell scripts that Attachment
Converter uses to invoke external conversion utilities are expected to
be located at a specific filepath.  This is expected to change soon as
we flesh out our installation story.  For this next step, please copy
them to that location:
</p>

<pre class="example" id="org425f178">
$ cd /path/to/your/source/code/attachment-converter
$ mkdir -p ~/.config/attachment-converter/scripts
$ cp conversion-scripts/*.sh ~/.config/attachment-converter/scripts
</pre>
</div>
</div>

<div id="outline-container-org83c45b9" class="outline-4">
<h4 id="org83c45b9"><span class="section-number-4">1.2.6.</span> Time to Build</h4>
<div class="outline-text-4" id="text-1-2-6">
<p>
You should now be ready to build Attachment Converter.  To build:
</p>

<pre class="example" id="orgcfaf580">
$ cd /path/to/your/source/code/attachment-converter
$ make
</pre>

<p>
You can then install Attachment Converter by copying the binary to
wherever you keep your binaries:
</p>

<pre class="example" id="orgd10ce3c">
$ cd /path/to/your/source/code/attachment-converter
$ mv _build/default/main.exe /path/to/your/binaries/attc
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge94df2d" class="outline-2">
<h2 id="orge94df2d"><span class="section-number-2">2.</span> Advanced Concepts</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org4202297" class="outline-3">
<h3 id="org4202297"><span class="section-number-3">2.1.</span> Conversion Customization</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Coming soon&#x2026;
</p>


<div id="org87c1da0" class="figure">
<p><a href="./index.html" id="back-to-top"><img src="../images/back_to_top.svg" alt="back_to_top.svg" class="org-svg" id="back-to-top" /></a>
</p>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Matt Teichman</p>
<p class="date">Created: 2023-08-24 Thu 16:09</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
