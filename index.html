<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2023-08-01 Tue 16:23 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Attachment Converter</title>
<meta name="author" content="Matt Teichman" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/js/readtheorg.js"></script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">Attachment Converter</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org036eb79">1. Introduction</a></li>
<li><a href="#org452df04">2. Running</a></li>
<li><a href="#orgda3734a">3. GitHub</a></li>
<li><a href="#org0ed4eec">4. Installation </a>
<ul>
<li><a href="#org9b248d5">4.1. Build</a>
<ul>
<li><a href="#org178f232">4.1.1. Download the source</a></li>
<li><a href="#org1e90714">4.1.2. Install <code>opam</code></a></li>
<li><a href="#orgcabad32">4.1.3. Install Mercurial</a></li>
<li><a href="#orgcaeb428">4.1.4. Install <code>opam</code> dependencies</a></li>
<li><a href="#org3754800">4.1.5. Install OS-level dependencies</a></li>
<li><a href="#org905263a">4.1.6. Copy shell scripts to standard location</a></li>
<li><a href="#org3d479dd">4.1.7. Time to Build</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org3a2c7d4">5. Background </a></li>
</ul>
</div>
</div>
<p>
This project is currently in pre-alpha stage, but keep checking back
for updates.  Release coming in summer 2023.
</p>

<div id="outline-container-org036eb79" class="outline-2">
<h2 id="org036eb79"><span class="section-number-2">1.</span> Introduction</h2>
<div class="outline-text-2" id="text-1">
<p>
Attachment Converter is an open-source command-line tool for digital
archivists.  Given an email mailbox in <a href="https://en.wikipedia.org/wiki/Mbox">MBOX</a> format, it will go through
that mailbox and batch convert all the attachments it can into
npreservation formats, putting a converted copy of each attachment back
into the email from which it originated.  The user can then re-open
the new mailbox in a mail user agent, such as <a href="https://en.wikipedia.org/wiki/Apple_Mail">Apple Mail</a>, and browse
through the mailbox the normal way.
</p>
</div>
</div>

<div id="outline-container-org452df04" class="outline-2">
<h2 id="org452df04"><span class="section-number-2">2.</span> Running</h2>
<div class="outline-text-2" id="text-2">
<p>
(These instructions assume you have Attachment Converter <a href="#org7f862fc">installed</a>.)
</p>

<p>
With the config file set up, Attachment Converter can be run:
</p>

<pre class="example" id="orgcb16415">
$ attc --single-email &lt; example-email.eml &gt; example-email-converted.eml
$ attc --report &lt; example.mbox
$ attc &lt; example.mbox &gt; example-converted.mbox
</pre>

<p>
Note that the input mailbox must be in <a href="https://en.wikipedia.org/wiki/Mbox">MBOX</a> format.  If you have an
Outlook <code>.pst</code> file and want to convert it to <code>.mbox</code> in order to be
able to run Attachment Converter on it, we have found <a href="https://www.five-ten-sg.com/libpst/">Libpst</a> to be a
useful utility for doing that conversion.
</p>
</div>
</div>

<div id="outline-container-orgda3734a" class="outline-2">
<h2 id="orgda3734a"><span class="section-number-2">3.</span> GitHub</h2>
<div class="outline-text-2" id="text-3">
<p>
Our GitHub page can be found here:
</p>

<p>
<a href="https://github.com/uchicago-library/attachment-converter">https://github.com/uchicago-library/attachment-converter</a>
</p>

<p>
We are currently in the pre-alpha phase, gearing up to our first round
of user testing.  Once the project is released, we will provide
multiple out-of-the-box installation options.  However, as of April
2023, the only way to install Attachment Converter is to build it from
source.  <a href="#org7f862fc">See below</a> for installation instructions.
</p>

<p>
We expect to be updating this website frequently as we get closer to
our release date, so please feel free to keep checking back.
</p>
</div>
</div>

<div id="outline-container-org0ed4eec" class="outline-2">
<h2 id="org0ed4eec"><span class="section-number-2">4.</span> Installation <a id="org7f862fc"></a></h2>
<div class="outline-text-2" id="text-4">
<p>
Once this software is ready for official release, we will be providing
multiple installation options across as many hardware and OS platforms
as we can.  Currently, however, the only way to install the project is
to build it from source, which you probably only realistically want to
attempt if you're either a developer or a system administrator.  These
instructions are currently undergoing heavy revision, so if you try
them out and experience any difficulties, please don't hesitate to
<a href="#orga22538b">contact us</a>.  User feedback at this stage is incredibly valuable.
</p>

<p>
For ordinary users, we intend to make Attachment Converter available
to install via one of the standard package managers and also directly
as a binary upon its first release.  Please check back later this year
for updates!
</p>

<p>
As we work toward our first release, here are instructions for
building Attachment Converter from source and then installing it.
</p>
</div>

<div id="outline-container-org9b248d5" class="outline-3">
<h3 id="org9b248d5"><span class="section-number-3">4.1.</span> Build</h3>
<div class="outline-text-3" id="text-4-1">
</div>
<div id="outline-container-org178f232" class="outline-4">
<h4 id="org178f232"><span class="section-number-4">4.1.1.</span> Download the source</h4>
<div class="outline-text-4" id="text-4-1-1">
<p>
You can get the latest source straight from our <a href="https://github.com/uchicago-library/attachment-converter">GitHub repository</a>:
</p>

<pre class="example" id="orgda40355">
$ cd /path/to/your/source/code
$ git clone https://github.com/uchicago-library/attachment-converter.git
</pre>
</div>
</div>

<div id="outline-container-org1e90714" class="outline-4">
<h4 id="org1e90714"><span class="section-number-4">4.1.2.</span> Install <code>opam</code></h4>
<div class="outline-text-4" id="text-4-1-2">
<p>
Attachment Converter is written in <a href="https://ocaml.org/">OCaml</a>, which means that in order to
build it, you need to install the <code>opam</code> package manager, which we
recommend doing via your operating system's package manager.  For
example:
</p>

<p>
Arch Linux:
</p>

<pre class="example" id="orge11b049">
$ pacman -S opam
</pre>

<p>
macOS:
</p>

<pre class="example" id="org453499b">
$ brew install opam
</pre>

<p>
WSL Debian:
</p>

<pre class="example" id="org3d73ddd">
$ apt install opam
</pre>

<p>
Then, regardless of how you install <code>opam</code>, you need to initialize it
in order to be able to use it.
</p>

<pre class="example" id="org404f731">
$ opam init
$ eval $(opam env)
</pre>

<p>
<code>opam</code> should then print some information to the console telling you
about the steps it's taking to initialize.
</p>

<p>
That should be enough to get you going, but if you'd like more
detailed information on how to install <code>opam</code>, please see <a href="http://opam.ocaml.org/doc/Install.html#Using-your-distribution-39-s-package-system">the official
installation instructions</a>.
</p>
</div>
</div>

<div id="outline-container-orgcabad32" class="outline-4">
<h4 id="orgcabad32"><span class="section-number-4">4.1.3.</span> Install Mercurial</h4>
<div class="outline-text-4" id="text-4-1-3">
<p>
Attachment Converter relies on the Mercurial version control system to
install some of its third-party library dependencies.  For example:
</p>

<p>
Arch Linux:
</p>

<pre class="example" id="org5441c95">
$ pacman -S mercurial
</pre>

<p>
macOS:
</p>

<pre class="example" id="orge047082">
$ brew install mercurial
</pre>

<p>
WSL Debian:
</p>

<pre class="example" id="orgfea9799">
$ apt install mercurial
</pre>
</div>
</div>

<div id="outline-container-orgcaeb428" class="outline-4">
<h4 id="orgcaeb428"><span class="section-number-4">4.1.4.</span> Install <code>opam</code> dependencies</h4>
<div class="outline-text-4" id="text-4-1-4">
<p>
To install all third-party library dependencies for Attachment
Converter to your <code>~/.opam</code> directory (which is where <code>opam</code> put the
OCaml compiler and other packages it's going to use when you ran <code>opam
init</code>), please run the following <code>make</code> rule from the root directory
of the GitHub project you cloned:
</p>

<pre class="example" id="orgfde1f4f">
$ cd /path/to/your/source/code/attachment-converter
$ make deps
</pre>

<p>
This will make the Digital Library Development Center's very own
<code>opam</code> repository available to you, then install all of Attachment
Converter's third-party library dependencies.  <code>make deps</code> should
suffice for most purposes, but if you'd like to pursue the slightly
fancier option of creating a sandboxed <code>opam</code> switch, you can instead
run:
</p>

<pre class="example" id="org6949f10">
$ cd /path/to/your/source/code/attachment-converter
$ make sandbox
</pre>

<p>
If you don't know what a sandboxed <code>opam</code> switch is, we suggest not
worrying about it and going with the <code>make deps</code> rule.
</p>
</div>
</div>

<div id="outline-container-org3754800" class="outline-4">
<h4 id="org3754800"><span class="section-number-4">4.1.5.</span> Install OS-level dependencies</h4>
<div class="outline-text-4" id="text-4-1-5">
<p>
Next, you must install Attachment Converter's OS-level dependencies.
For example:
</p>

<p>
Arch Linux:
</p>
<pre class="example" id="org030187e">
$ pacman -S libreoffice pandoc libvips ghostscript
</pre>

<p>
macOS:
</p>
<pre class="example" id="orgf420c79">
$ brew install libreoffice pandoc vips ghostscript verapdf
</pre>

<p>
WSL Debian:
</p>
<pre class="example" id="org5a82a0d">
$ apt install libreoffice pandoc vips ghostscript verapdf
</pre>

<p>
Finally, Attachment Converter has one OS-level dependency that is not
available through the standard repositories, called <a href="https://github.com/matteosecli/pdf2archive"><code>pdf2archive</code></a>.
This is a utility for converting PDF to PDF-A-1b.
</p>

<p>
Download <code>pdf2archive</code>:
</p>

<pre class="example" id="org228008c">
$ cd /path/to/your/source/code
$ git clone git@github.com:matteosecli/pdf2archive.git
$ cd pdf2archive
$ chmod +x ./pdf2archive
$ export PATH=$PATH:/path/to/your/source/code/pdf2archive
</pre>
</div>
</div>

<div id="outline-container-org905263a" class="outline-4">
<h4 id="org905263a"><span class="section-number-4">4.1.6.</span> Copy shell scripts to standard location</h4>
<div class="outline-text-4" id="text-4-1-6">
<p>
In our current pre-alpha stage, the shell scripts that Attachment
Converter uses to invoke external conversion utilities are expected to
be located at a specific filepath.  This is expected to change soon as
we flesh out our installation story.  For this next step, please copy
them to that location:
</p>

<pre class="example" id="org1ac11c0">
$ cd /path/to/your/source/code/attachment-converter
$ mkdir -p ~/.config/attachment-converter/scripts
$ cp conversion-scripts/*.sh ~/.config/attachment-converter/scripts
</pre>
</div>
</div>


<div id="outline-container-org3d479dd" class="outline-4">
<h4 id="org3d479dd"><span class="section-number-4">4.1.7.</span> Time to Build</h4>
<div class="outline-text-4" id="text-4-1-7">
<p>
You should now be ready to build Attachment Converter.  To build:
</p>

<pre class="example" id="orgb0bc880">
$ cd /path/to/your/source/code/attachment-converter
$ make
</pre>

<p>
You can then install Attachment Converter by copying the binary to
wherever you keep your binaries:
</p>

<pre class="example" id="org413502e">
$ cd /path/to/your/source/code/attachment-converter
$ mv _build/default/main.exe /path/to/your/binaries/attc
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org3a2c7d4" class="outline-2">
<h2 id="org3a2c7d4"><span class="section-number-2">5.</span> Background <a id="orga22538b"></a></h2>
<div class="outline-text-2" id="text-5">
<p>
This project originates from the <a href="https://www.lib.uchicago.edu">UChicago Library</a> <a href="https://dldc.lib.uchicago.edu">Digital Library
Development Center</a> and was funded by an <a href="https://emailarchivesgrant.library.illinois.edu">Email Archives: Building
Capacity and Community</a> grant, led by the University of Illinois with
support provided by the <a href="https://mellon.org">Andrew W. Mellon Foundation</a>.  The current
development team is:
</p>

<ul class="org-ul">
<li><a href="https://nmmull.github.io/">Nathan Mull</a>
<ul class="org-ul">
<li><code>first letter of first name</code> + <code>last name</code> + <code>@uchicago.edu</code></li>
</ul></li>
<li><a href="https://www.lib.uchicago.edu/about/directory/staff/matt-teichman/">Matt Teichman</a>
<ul class="org-ul">
<li><code>last name</code> + <code>@uchicago.edu</code></li>
</ul></li>
<li><a href="https://theworldofobi.github.io/">Obi Obetta</a>
<ul class="org-ul">
<li><code>last name</code> + steph + <code>@uchicago.edu</code></li>
</ul></li>
</ul>

<p>
Matt has been project manager for the initial development phase and is
getting ready to transition into the lead developer role.  Previous
(and possibly future?) members of our illustrious dev team include:
</p>

<ul class="org-ul">
<li><a href="https://github.com/OwenPriceSkelly">Owen Price Skelly</a></li>
<li><a href="https://github.com/cormacd9818">Cormac Duhamel</a></li>
</ul>

<p>
We are also grateful to <a href="https://www2.lib.uchicago.edu/keith/">Keith Waclena</a> for allowing us to tap into his
endless wisdom regarding the email specification, UNIX systems
programming, and the OCaml language throughout our work on this
project.
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Matt Teichman</p>
<p class="date">Created: 2023-08-01 Tue 16:23</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
